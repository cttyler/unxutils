<!-- manual page source format generated by PolyglotMan v3.0.7, -->
<!-- available via anonymous ftp from ftp.cs.berkeley.edu:/ucb/people/phelps/tcltk/rman.tar.Z -->

<HTML>
<HEAD>
<TITLE>FILE(__CSECTION__) manual page</TITLE>
</HEAD>
<BODY bgcolor=white>
<A HREF="#toc">Table of Contents</A><P>
  
<H2><A NAME="sect0" HREF="#toc0">Name </A></H2>
file - determine file type  
<H2><A NAME="sect1" HREF="#toc1">Synopsis </A></H2>
<B>file</B> [ <B>-bcikLnNsvz</B> ] [ <B>-f</B> <I>namefile</I> 
] [ <B>-F</B> <I>separator</I> ] [ <B>-m </B> <I>magicfiles</I> ] <I>file</I> ...  <BR>
<B>file</B> <B>-C</B> [ <B>-m </B> magicfile ]  
<H2><A NAME="sect2" HREF="#toc2">Description </A></H2>
This manual page documents version 
__VERSION__ of the <B>file</B> command. <P>
<B>File</B> tests each argument in an attempt 
to classify it. There are three sets of tests, performed in this order: 
filesystem tests, magic number tests, and language tests. The <I>first</I> test 
that succeeds causes the file type to be printed. <P>
The type printed will 
usually contain one of the words <B>text</B> (the file contains only printing 
characters and a few common control characters and is probably safe to 
read on an <FONT SIZE=-1>ASCII</FONT>
 terminal), <B>executable</B> (the file contains the result of 
compiling a program in a form understandable to some <FONT SIZE=-1>UNIX</FONT>
 kernel or another), 
or <B>data</B> meaning anything else (data is usually `binary' or non-printable). 
Exceptions are well-known file formats (core files, tar archives) that 
are known to contain binary data. When modifying the file <I>__MAGIC__</I> or 
the program itself,  <B>preserve these keywords .</B> People depend on knowing 
that all the readable files in a directory have the word ``text'' printed. 
Don't do as Berkeley did and change ``shell commands text'' to ``shell script''. 
Note that the file <I>__MAGIC__</I> is built mechanically from a large number 
of small files in the subdirectory <I>Magdir</I> in the source distribution of 
this program. <P>
The filesystem tests are based on examining the return from 
a <B><A HREF="s">stat</B>(2)</A>
 system call. The program checks to see if the file is empty, 
or if it's some sort of special file. Any known file types appropriate to 
the system you are running on (sockets, symbolic links, or named pipes 
(FIFOs) on those systems that implement them) are intuited if they are 
defined in the system header file <I>&lt;sys/stat.h&gt;</I>. <P>
The magic number tests are 
used to check for files with data in particular fixed formats. The canonical 
example of this is a binary executable (compiled program) <I>a.out</I> file, whose 
format is defined in  <I>a.out.h</I> and possibly <I>exec.h</I> in the standard include 
directory. These files have a `magic number' stored in a particular place 
near the beginning of the file that tells the <FONT SIZE=-1>UNIX</FONT>
 operating system that 
the file is a binary executable, and which of several types thereof. The 
concept of `magic number' has been applied by extension to data files. Any 
file with some invariant identifier at a small fixed offset into the file 
can usually be described in this way. The information identifying these 
files is read from the compiled magic file <I>__MAGIC__.mgc</I> , or  <I>__MAGIC__</I> 
if the compile file does not exist. <P>
If a file does not match any of the 
entries in the magic file, it is examined to see if it seems to be a text 
file. ASCII, ISO-8859-x, non-ISO 8-bit extended-ASCII character sets (such as 
those used on Macintosh and IBM PC systems), UTF-8-encoded Unicode, UTF-16-encoded 
Unicode, and EBCDIC character sets can be distinguished by the different 
ranges and sequences of bytes that constitute printable text in each set. 
If a file passes any of these tests, its character set is reported. ASCII, 
ISO-8859-x, UTF-8, and extended-ASCII files are identified as ``text'' because 
they will be mostly readable on nearly any terminal; UTF-16 and EBCDIC 
are only ``character data'' because, while they contain text, it is text that 
will require translation before it can be read. In addition, <B>file</B> will 
attempt to determine other characteristics of text-type files. If the lines 
of a file are terminated by CR, CRLF, or NEL, instead of the Unix-standard 
LF, this will be reported. Files that contain embedded escape sequences 
or overstriking will also be identified. <P>
Once <B>file</B> has determined the character 
set used in a text-type file, it will attempt to determine in what language 
the file is written. The language tests look for particular strings (cf 
<I>names.h</I>) that can appear anywhere in the first few blocks of a file. For 
example, the keyword <B>.br</B> indicates that the file is most likely a <B><A HREF="s">troff</B>(1)</A>
 
input file, just as the keyword  <B>struct</B> indicates a C program. These tests 
are less reliable than the previous two groups, so they are performed 
last. The language test routines also test for some miscellany (such as 
 <B><A HREF="s">tar</B>(1)</A>
 archives). <P>
Any file that cannot be identified as having been written 
in any of the character sets listed above is simply said to be ``data''.  
<H2><A NAME="sect3" HREF="#toc3">Options 
</A></H2>

<DL>

<DT><B>-b</B>  </DT>
<DD>Do not prepend filenames to output lines (brief mode). </DD>

<DT><B>-c</B>  </DT>
<DD>Cause a checking 
printout of the parsed form of the magic file. This is usually used in 
conjunction with  <B>-m</B> to debug a new magic file before installing it. </DD>

<DT><B>-C</B>  
</DT>
<DD>Write a magic.mgc output file that contains a pre-parsed version of file. 
</DD>

<DT><B>-f</B><I> namefile</I>  </DT>
<DD>Read the names of the files to be examined from  <I>namefile</I> 
(one per line)  before the argument list. Either  <I>namefile</I> or at least 
one filename argument must be present; to test the standard input, use 
``-'' as a filename argument. </DD>

<DT><B>-F</B><I> separator</I>  </DT>
<DD>Use the specified string as the separator 
between the filename and the file result returned. Defaults to ``:''. </DD>

<DT><B>-i</B>  </DT>
<DD>Causes 
the file command to output mime type strings rather than the more traditional 
human readable ones. Thus it may say ``text/plain; charset=us-ascii'' rather 
than ``ASCII text''. In order for this option to work, file changes the way 
it handles files recognised by the command itself (such as many of the 
text file types, directories etc), and makes use of an alternative ``magic'' 
file. (See ``FILES'' section, below). </DD>

<DT><B>-k</B>  </DT>
<DD>Don't stop at the first match, keep 
going. </DD>

<DT><B>-L</B>  </DT>
<DD>option causes symlinks to be followed, as the like-named option 
in <B><A HREF="s">ls</B>(1)</A>
. (on systems that support symbolic links). </DD>

<DT><B>-m</B><I> list</I>  </DT>
<DD>Specify an alternate 
list of files containing magic numbers. This can be a single file, or a 
colon-separated list of files. </DD>

<DT><B>-n</B>  </DT>
<DD>Force stdout to be flushed after checking 
each file. This is only useful if checking a list of files. It is intended 
to be used by programs that want filetype output from a pipe. </DD>

<DT><B>-N</B>  </DT>
<DD>Don't pad 
filenames so that they align in the output. </DD>

<DT><B>-s</B>  </DT>
<DD>Normally, <B>file</B> only attempts 
to read and determine the type of argument files which <B><A HREF="s">stat</B>(2)</A>
 reports 
are ordinary files. This prevents problems, because reading special files 
may have peculiar consequences. Specifying the <B>-s</B> option causes <B>file</B> to 
also read argument files which are block or character special files. This 
is useful for determining the filesystem types of the data in raw disk 
partitions, which are block special files. This option also causes <B>file</B> 
to disregard the file size as reported by <B><A HREF="s">stat</B>(2)</A>
 since on some systems 
it reports a zero size for raw disk partitions. </DD>

<DT><B>-v</B>  </DT>
<DD>Print the version of 
the program and exit. </DD>

<DT><B>-z</B>  </DT>
<DD>Try to look inside compressed files. </DD>
</DL>
 
<H2><A NAME="sect4" HREF="#toc4">Files </A></H2>
<I>__MAGIC__.mgc</I> 
- default compiled list of magic numbers <P>
<I>__MAGIC__</I> - default list of magic 
numbers <P>
<I>__MAGIC__.mime.mgc</I> - default compiled list of magic numbers, used 
to output mime types when the -i option is specified. <P>
<I>__MAGIC__.mime</I> - default 
list of magic numbers, used to output mime types when the -i option is 
specified.  
<!--
 
  
-->
 
<H2><A NAME="sect5" HREF="#toc5">Environment </A></H2>
The environment variable <B>MAGIC</B> can be used 
to set the default magic number files.  
<H2><A NAME="sect6" HREF="#toc6">See Also </A></H2>
<B>magic</B>(__FSECTION__) - description 
of magic file format.  <BR>
<B><A HREF="s">strings</B>(1)</A>
,<B> <A HREF="s">od</B>(1)</A>
,<B> <A HREF="s">hexdump(1)</B></A>
 - tools for examining non-textfiles.  
<H2><A NAME="sect7" HREF="#toc7">Standards 
Conformance </A></H2>
This program is believed to exceed the System V Interface 
Definition of FILE(CMD), as near as one can determine from the vague language 
contained therein.  Its behaviour is mostly compatible with the System 
V program of the same name. This version knows more magic, however, so 
it will produce different (albeit more accurate) output in many cases. 
 <P>
The one significant difference  between this version and System V is 
that this version treats any white space as a delimiter, so that spaces 
in pattern strings must be escaped. For example,  <BR>
&gt;10<tt> </tt>&nbsp;<tt> </tt>&nbsp;string<tt> </tt>&nbsp;<tt> </tt>&nbsp;language impress&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;(imPRESS data)  <BR>
in an existing magic file would have to be changed to  <BR>
&gt;10<tt> </tt>&nbsp;<tt> </tt>&nbsp;string<tt> </tt>&nbsp;<tt> </tt>&nbsp;language\ impress<tt> </tt>&nbsp;<tt> </tt>&nbsp;(imPRESS data)  <BR>
In addition, in this version, if a pattern string contains a backslash, 
it must be escaped. For example  <BR>
0<tt> </tt>&nbsp;<tt> </tt>&nbsp;string<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;\begindata<tt> </tt>&nbsp;<tt> </tt>&nbsp;Andrew Toolkit document  <BR>
in an existing magic file would have to be changed to  <BR>
0<tt> </tt>&nbsp;<tt> </tt>&nbsp;string<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;\\begindata<tt> </tt>&nbsp;<tt> </tt>&nbsp;Andrew Toolkit document  <BR>
<P>
SunOS releases 3.2 and later from Sun Microsystems include a <B><A HREF="s">file</B>(1)</A>
 command 
derived from the System V one, but with some extensions. My version differs 
from Sun's only in minor ways. It includes the extension of the `&amp;' operator, 
used as, for example,  <BR>
&gt;16<tt> </tt>&nbsp;<tt> </tt>&nbsp;long&amp;0x7fffffff<tt> </tt>&nbsp;<tt> </tt>&nbsp;&gt;0<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;<tt> </tt>&nbsp;not stripped  
<H2><A NAME="sect8" HREF="#toc8">Magic Directory </A></H2>
The magic file entries 
have been collected from various sources, mainly USENET, and contributed 
by various authors. Christos Zoulas (address below) will collect additional 
or corrected magic file entries. A consolidation of magic file entries 
 will be distributed periodically. <P>
The order of entries in the magic file 
is significant. Depending on what system you are using, the order that 
they are put together may be incorrect. If your old <B>file</B> command uses a 
magic file, keep the old magic file around for comparison purposes (rename 
it to  <I>__MAGIC__.orig</I>).  
<H2><A NAME="sect9" HREF="#toc9">Examples </A></H2>
 <BR>
 <PRE>$ file file.c file /dev/{wd0a,hda} 
 file.c:   C program text 
 file:     ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), 
           dynamically linked (uses shared libs), stripped 
 /dev/wd0a: block special (0/0) 
 /dev/hda: block special (3/0) 
 $ file -s /dev/wd0{b,d} 
 /dev/wd0b: data 
 /dev/wd0d: x86 boot sector 
 $ file -s /dev/hda{,1,2,3,4,5,6,7,8,9,10} 
 /dev/hda:   x86 boot sector 
 /dev/hda1:  Linux/i386 ext2 filesystem 
 /dev/hda2:  x86 boot sector 
 /dev/hda3:  x86 boot sector, extended partition table 
 /dev/hda4:  Linux/i386 ext2 filesystem 
 /dev/hda5:  Linux/i386 swap file 
 /dev/hda6:  Linux/i386 swap file 
 /dev/hda7:  Linux/i386 swap file 
 /dev/hda8:  Linux/i386 swap file 
 /dev/hda9:  empty 
 /dev/hda10: empty 
   
  $ file -i file.c file /dev/{wd0a,hda} 
 file.c:      text/x-c 
 file:        application/x-executable, dynamically linked (uses shared 
libs), 
 not stripped 
 /dev/hda:    application/x-not-regular-file 
 /dev/wd0a:   application/x-not-regular-file 
   
   </PRE> 
<H2><A NAME="sect10" HREF="#toc10">History </A></H2>
There has been a  <B>file</B> command in every <FONT SIZE=-1>UNIX</FONT>
 since at least 
Research Version 4 (man page dated November, 1973). The System V version 
introduced one significant major change: the external list of magic number 
types. This slowed the program down slightly but made it a lot more flexible. 
<P>
This program, based on the System V version, was written by Ian Darwin 
&lt;ian@darwinsys.com&gt; without looking at anybody else's source code. <P>
John Gilmore 
revised the code extensively, making it better than the first version. 
Geoff Collyer found several inadequacies and provided some magic file 
entries. Contributions by the `&amp;' operator by Rob McMahon, cudcv@warwick.ac.uk, 
1989. <P>
Guy Harris, guy@netapp.com, made many changes from 1993 to the present. 
<P>
Primary development and maintenance from 1990 to the present by Christos 
Zoulas (christos@astron.com). <P>
Altered by Chris Lowth, chris@lowth.com, 2000: 
Handle the ``-i'' option to output mime type strings and using an alternative 
magic file and internal logic. <P>
Altered by Eric Fischer (enf@pobox.com), 
July, 2000, to identify character codes and attempt to identify the languages 
of non-ASCII files. <P>
The list of contributors to the "Magdir" directory (source 
for the /etc/magic file) is too long to include here. You know who you 
are; thank you.  
<H2><A NAME="sect11" HREF="#toc11">Legal Notice </A></H2>
Copyright (c) Ian F. Darwin, Toronto, Canada, 
1986-1999. Covered by the standard Berkeley Software Distribution copyright; 
see the file LEGAL.NOTICE in the source distribution. <P>
The files <I>tar.h</I> and 
<I>is_tar.c</I> were written by John Gilmore from his public-domain <B>tar</B> program, 
and are not covered by the above license.  
<H2><A NAME="sect12" HREF="#toc12">Bugs </A></H2>
There must be a better 
way to automate the construction of the Magic file from all the glop in 
magdir. What is it? Better yet, the magic file should be compiled into 
binary (say, <B><A HREF="s">ndbm</B>(3)</A>
 or, better yet, fixed-length <FONT SIZE=-1>ASCII</FONT>
 strings for use 
in heterogenous network environments) for faster startup. Then the program 
would run as fast as the Version 7 program of the same name, with the 
flexibility of the System V version. <P>
<B>File</B> uses several algorithms that 
favor speed over accuracy, thus it can be misled about the contents of 
text files. <P>
The support for text files (primarily for programming languages) 
is simplistic, inefficient and requires recompilation to update. <P>
There 
should be an ``else'' clause to follow a series of continuation lines. <P>
The 
magic file and keywords should have regular expression support. Their use 
of <FONT SIZE=-1>"ASCII TAB"</FONT>
 as a field delimiter is ugly and makes it hard to edit 
the files, but is entrenched. <P>
It might be advisable to allow upper-case 
letters in keywords for e.g., <B><A HREF="s">troff</B>(1)</A>
 commands vs man page macros. Regular 
expression support would make this easy. <P>
The program doesn't grok <FONT SIZE=-1>FORTRAN</FONT>
. 
It should be able to figure <FONT SIZE=-1>FORTRAN</FONT>
 by seeing some keywords which  appear 
indented at the start of line. Regular expression support would make this 
easy. <P>
The list of keywords in  <I>ascmagic</I> probably belongs in the Magic file. 
This could be done by using some keyword like `*' for the offset value. <P>
Another 
optimisation would be to sort the magic file so that we can just run down 
all the tests for the first byte, first word, first long, etc, once we 
have fetched it. Complain about conflicts in the magic file entries. Make 
a rule that the magic entries sort based on file offset rather than position 
within the magic file? <P>
The program should provide a way to give an estimate 
 of ``how good'' a guess is. We end up removing guesses (e.g. ``From '' as first 
5 chars of file) because they are not as good as other guesses (e.g. ``Newsgroups:'' 
versus ``Return-Path:''). Still, if the others don't pan out, it should be possible 
to use the first guess.   <P>
This program is slower than some vendors' file 
commands. The new support for multiple character codes makes it even slower. 
<P>
This manual page, and particularly this section, is too long.  
<H2><A NAME="sect13" HREF="#toc13">Availability 
</A></H2>
You can obtain the original author's latest version by anonymous FTP on 
<B>ftp.astron.com</B> in the directory <I>/pub/file/file-X.YZ.tar.gz</I> <P>

<HR><P>
<A NAME="toc"><B>Table of Contents</B></A><P>
<UL>
<LI><A NAME="toc0" HREF="#sect0">Name</A></LI>
<LI><A NAME="toc1" HREF="#sect1">Synopsis</A></LI>
<LI><A NAME="toc2" HREF="#sect2">Description</A></LI>
<LI><A NAME="toc3" HREF="#sect3">Options</A></LI>
<LI><A NAME="toc4" HREF="#sect4">Files</A></LI>
<LI><A NAME="toc5" HREF="#sect5">Environment</A></LI>
<LI><A NAME="toc6" HREF="#sect6">See Also</A></LI>
<LI><A NAME="toc7" HREF="#sect7">Standards Conformance</A></LI>
<LI><A NAME="toc8" HREF="#sect8">Magic Directory</A></LI>
<LI><A NAME="toc9" HREF="#sect9">Examples</A></LI>
<LI><A NAME="toc10" HREF="#sect10">History</A></LI>
<LI><A NAME="toc11" HREF="#sect11">Legal Notice</A></LI>
<LI><A NAME="toc12" HREF="#sect12">Bugs</A></LI>
<LI><A NAME="toc13" HREF="#sect13">Availability</A></LI>
</UL>
</BODY></HTML>
